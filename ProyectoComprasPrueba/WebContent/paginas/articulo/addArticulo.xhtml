<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE ui:composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" >
  <h:form id="formNewArticulo" >
    <p:dialog id="carDialogNewArticulo" header="Nuevo(a) Articulo" widgetVar="carDialogNewArticulo" showEffect="fade" resizable="false" hideEffect="explode" modal="true" draggable="false" >
      <h:panelGrid cellpadding="0" cellspacing="2" width="100%" >
        <p:panel header="Datos de Articulo" >
          <h:panelGrid cellspacing="4" columns="2" id="pgNuevoArticulo" >
          <p:row >
											<p:column colspan="4"  >
												<p:outputLabel value="Datos del Artículo" styleClass="subtitulo" />
											</p:column>
										</p:row>

										<p:row>
											<p:column colspan="4">
												<p:message for="descripcion" id="mdescripcion"/>
											</p:column>
										</p:row>
										
										<p:row>
											<p:column >
												<p:outputLabel value="Descripción" />
											</p:column>
											
											<p:column colspan="3">
												<p:inputText id="descripcion" value="#{articuloBean.articulo.vc_desarticulo}" size="90"  label="Descripción" required="true" maxlength="50">
													<f:validateLength minimum="1" maximum="50" /> 
													<p:ajax  event="blur" update="mdescripcion"  /> 
												</p:inputText>
											</p:column>
																															
										</p:row>
										
										<p:row>
											<p:column colspan="4">
												<p:outputLabel value="Datos del tipo" styleClass="subtitulo"/>
											</p:column>
										</p:row>
										
										<p:row>
											<p:column colspan="4">
												<p:message for="tipo" id="mtipo" />
											</p:column>
										</p:row>
										
										<p:row>
											<p:column>
												<p:outputLabel value="Código" />
											</p:column>
											
											<p:column style="width: 87px;"  >
												<p:inputText id="tipo" value="#{articuloBean.articulo.artTipo.in_idlistado}" size="8" disabled="false" label="Tipo" required="true" maxlength="6" immediate="false" onkeypress="if (event.keyCode == 13) {onchange(); return false;}"  >
													<f:validateLength minimum="6" maximum="6" />
													<p:ajax  event="change" update="destipo,mtipo" listener="#{articuloBean.buscarTipo}"  />  
												</p:inputText>
											</p:column>
											
											<p:column >
												<p:inputText id="destipo" size="54" readonly="true" value="#{articuloBean.articulo.artTipo.vc_deslistado}" />
											</p:column>
																										
											<p:column>
												<p:commandButton icon="ui-icon-search" action="#{articuloBean.showBuscar('buscarCatalogo','Tipo','TIPOS')}" title="Buscar" immediate="true" >
													<p:ajax event="dialogReturn" listener="#{articuloBean.handleReturn}" update="tipo,destipo,mtipo"/>
												</p:commandButton>
												<!--  <p:commandButton icon="ui-icon-pencil" action="/paginas/mantenerCatalogo" actionListener='#{ttabd.cargar("TIPOS","Tipo")}' title="Mantener" immediate="true"/>-->
											</p:column>
																						
										</p:row>
																				
										<p:row>
											<p:column colspan="4">
												<p:outputLabel value="Datos de la unidad de medida" styleClass="subtitulo"/>
											</p:column>
										</p:row>
										
										<p:row>
											<p:column colspan="4">
												<p:message for="medida" id="mmedida" />
											</p:column>
										</p:row>
										
										<p:row>
											<p:column >
												<p:outputLabel value="Código" />
											</p:column>
											<p:column >
												<p:inputText id="medida" value="#{articuloBean.articulo.artMedida.in_idlistado}" size="8" disabled="false" label="Medida" required="true" maxlength="6" immediate="false" onkeypress="if (event.keyCode == 13) {onchange(); return false;}" >
													<f:validateLength minimum="6" maximum="6" />
													<p:ajax event="change" update="desmedida,mmedida" listener="#{articuloBean.buscarMedida}" /> 
												</p:inputText>
												
											</p:column>
											
											<p:column >
												<p:inputText id="desmedida" size="54" readonly="true" value="#{articuloBean.articulo.artMedida.vc_deslistado}" />
											</p:column>
											
											<p:column>
												<p:commandButton icon="ui-icon-search" actionListener="#{articuloBean.showBuscar('buscarCatalogo','Medida','UGMED')}" title="Buscar" immediate="true" >
													<p:ajax event="dialogReturn" listener="#{articuloBean.handleReturn}" update="medida,desmedida,mmedida"/>
												</p:commandButton>
												<!--  <p:commandButton icon="ui-icon-pencil" action="/paginas/mantenerCatalogo" actionListener='#{ttabd.cargar("UGMED","Unidad de Medida")}' title="Mantener" immediate="true"/>-->
											</p:column>
																					
										</p:row>
										
										<p:row>
											<p:column colspan="4">
												<p:outputLabel value="Datos de la marca" styleClass="subtitulo"/>
											</p:column>
										</p:row>
										
										<p:row>
											<p:column colspan="4">
												<p:message for="marca" id="mmarca" />
											</p:column>
										</p:row>
										
										<p:row>
											<p:column >
												<p:outputLabel value="Código" />
											</p:column>
											<p:column > 
												<p:inputText id="marca" value="#{articuloBean.articulo.artMarca.in_idlistado}" size="8" disabled="false" label="Marca" required="true" maxlength="6" immediate="false" onkeypress="if (event.keyCode == 13) {onchange(); return false;}" >
													<f:validateLength minimum="6" maximum="6" />
													<p:ajax event="change" update="desmarca,mmarca" listener="#{articuloBean.buscarMarca}"/>  
												</p:inputText>
												
											</p:column>
											
											<p:column >
												<p:inputText id="desmarca" size="54" readonly="true" value="#{articuloBean.articulo.artMarca.vc_deslistado}" />
											</p:column>
											
											<p:column>
												<p:commandButton icon="ui-icon-search" action="#{articuloBean.showBuscar('buscarCatalogo','Marca','MARCA')}" title="Buscar" immediate="true" >
													<p:ajax event="dialogReturn" listener="#{articuloBean.handleReturn}" update="marca,desmarca,mmarca"/>
												</p:commandButton>
											<!--  	<p:commandButton icon="ui-icon-pencil" action="/paginas/mantenerCatalogo" actionListener='#{ttabd.cargar("MARCA","Marca")}' title="Mantener" immediate="true" />-->
											</p:column>										
						
										</p:row>
										
										<p:row>
											<p:column colspan="4">
												<p:outputLabel value="Datos del modelo" styleClass="subtitulo"/>
											</p:column>
										</p:row>
										<p:row>
											<p:column colspan="4">
												<p:message for="modelo" id="mmodelo" />
											</p:column>
										</p:row>
										<p:row>
											<p:column >
												<p:outputLabel value="Código" />
											</p:column>
											<p:column >
												<p:inputText id="modelo" value="#{articuloBean.articulo.artModelo.in_idlistado}" size="8" disabled="false" label="Modelo" required="true" maxlength="6" immediate="false" onkeypress="if (event.keyCode == 13) {onchange(); return false;}">
													<f:validateLength minimum="6" maximum="6" />
													<p:ajax event="change" update="desmodelo,mmodelo" listener="#{articuloBean.buscarModelo}"/> 
												</p:inputText>
												
											</p:column>
											
											<p:column >
												<p:inputText id="desmodelo" size="54" readonly="true" value="#{articuloBean.articulo.artModelo.vc_deslistado}" />
											</p:column>
											
											<p:column>
												
												<p:commandButton icon="ui-icon-search" action="#{articuloBean.showBuscar('buscarCatalogo','Modelo','MODEL')}" title="Buscar" immediate="true" >
													<p:ajax event="dialogReturn" listener="#{articuloBean.handleReturn}" update="modelo,desmodelo,mmodelo"/>
												</p:commandButton>
											<!--  	<p:commandButton icon="ui-icon-pencil" action="/paginas/mantenerCatalogo" actionListener='#{ttabd.cargar("MODEL","Modelo")}' title="Mantener" immediate="true"/>-->
											</p:column>
										</p:row>
																										
										<p:row>
											<p:column colspan="4" >
												
												<!--  
												<p:dialog id="dlg" header="Mensaje del Sistema" widgetVar="dlg" Height="40" resizable="false" modal="true" showEffect="fade" hideEffect="fade" closable="false">
   													 <center>
   													 <p:panelGrid styleClass="table-in" >		
        												<p:row >
															<p:column width="200">
																<center>
																	<p:outputLabel value="#{tarti.mensaje}"/>
																</center>	
															</p:column>
														</p:row>
														<p:row>
															<p:column>
																<hr></hr>
															</p:column>
														</p:row>
														<p:row>
															<p:column width="200">
																<center>
																	<p:commandButton id="btnOK" value="Aceptar" action="/paginas/mantenerArticulo" actionListener="#{tarti.cargar}"  rendered="#{!tarti.articulo.error}"/>
																	<p:commandButton id="btnError" value="Aceptar" onclick="PF('dlg').hide();"   rendered="#{tarti.articulo.error}"/>
																</center>
															</p:column>
														</p:row>        	
        											  </p:panelGrid >
        											  </center>						 
												</p:dialog>
												-->
											</p:column>
										</p:row> 
									<!--  	</p:panelGrid>	-->
										
										<p:panelGrid styleClass="table-in" id="panelI">
									<p:row>
										<p:column> 
											<p:fileUpload  fileUploadListener="#{articuloBean.upload}" update="image" mode="advanced" auto="true" label="Buscar Imagen" sizeLimit="524288" allowTypes="/(\.|\/)(gif|jpg|jpeg|png)$/" invalidSizeMessage="Tamaño invalido (500 kb max)" invalidFileMessage="Solo se permiten los formatos (gif,jpg,jpeg y png)" previewWidth="100"  /> 
										</p:column>  
									</p:row>
									<p:row>
										<p:column>
											<p:graphicImage id="image" width="250" height="210" value="#{articuloBean.imagen}" cache="false"  />
										</p:column>
									</p:row>
								</p:panelGrid>
								
							<!--  	</p:panelGrid> -->
          
          </h:panelGrid>
        </p:panel>
      </h:panelGrid>
      <br />
      <center >
        <p:commandButton title="Guardar Nuevo(a) Articulo" value="Guardar" icon="icon-save" update=":formListArticulo:msgArticulo" oncomplete="if(!args.validationFailed)confirmInsertArticulo.show()" />
        <p:commandButton title="Cerrar Ventana" process="@this" value="Cerrar" icon="icon-cancel" oncomplete="confirmCloseArticuloAdd.show()" />
      </center>
    </p:dialog>
    <p:confirmDialog id="confirmInsertArticulo" global="true" showEffect="fade" hideEffect="explode" widgetVar="confirmInsertArticulo" header="Confirmaci&oacute;n" severity="alert" message="¿Está Seguro de Hacer el Registro?" >
      <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" update="confirmInsertArticulo,:formListArticulo:tablaListadoArticulo" oncomplete="confirmInsertArticulo.hide(),carDialogNewArticulo.hide()" actionListener="#{articuloBean.guardarRegistroArticulo}" process="@this" />
      <p:commandButton value="No" styleClass="ui-confirmdialog-no" icon="ui-icon-close" update="confirmInsertArticulo" oncomplete="confirmInsertArticulo.hide()" />
    </p:confirmDialog>
    <p:confirmDialog id="confirmCloseArticuloAdd" global="true" showEffect="fade" hideEffect="explode" widgetVar="confirmCloseArticuloAdd" header="Confirmaci&oacute;n" severity="alert" message="¿Está Seguro de Cerrar la ventana?" >
      <p:commandButton value="Yes" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" process="@this" update="confirmCloseArticuloAdd" oncomplete="confirmCloseArticuloAdd.hide(),carDialogNewArticulo.hide()" >
        <p:resetInput target="pgNuevoArticulo" />
      </p:commandButton>
      <p:commandButton value="No" styleClass="ui-confirmdialog-no" icon="ui-icon-close" process="@this" update="confirmCloseArticuloAdd" oncomplete="confirmCloseArticuloAdd.hide()" />
    </p:confirmDialog>
  </h:form>
</ui:composition>